;                              ______________________________________
;                             |                                      |
;                     ________|                                      |_______
;                     \       |              Compusave               |      /
;                      \      |                                      |     /
;                      /      |______________________________________|     \
;                     /__________)                                (_________\

[route_AT-in021]

exten => _021990100,1,set(DID=${EXTEN})
exten => _021990100,n,NoOp(${DID})
exten => _021990100,n,NoOp(${CALLERID(num)})
exten => _021990100,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => _021990100,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => _021990100,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}}))
exten => _021990100,n(vip),Set(QUEUE_PRIO=10)
exten => _021990100,n(vip),Goto(ligne_in_2,s,1)
exten => _021990100,n,Hangup()
exten => _021990100,n(simple),Set(QUEUE_PRIO=5)
exten => _021990100,n(simple),Goto(ligne_in_2,s,1)
exten => _021990100,n,Hangup()
exten => _021990100,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)})
exten => _021990100,n(blacklist),Playback(vm-goodbye)
exten => _021990100,n,Hangup()

[SVI_Test]
exten => s,1,Answer
exten => s,2,Set(TIMEOUT(response)=2)
exten => s,3,BackGround(/var/www/html/callme-dz.io/storage/app/public/data/music/default/default)
exten => s,4,WaitExten(5)
exten => s,5,GoTo(s,3)

;choix FR
exten => 1,1,Goto(choix_AR,s,1)
;Choix AR
exten => 2,1,Goto(choix_FR,s,1)


[choix_FR]

exten => s,1,BackGround(/var/www/html/callme-dz.io/storage/app/public/data/music/MoscoW/MoscoW)
exten => s,2,WaitExten(5)
exten => s,3,GoTo(s,1)

exten => 1,1,Goto(ligne_9,s,1)
exten => 2,1,Goto(ligne_9,s,1)

[choix_AR]
exten => s,1,BackGround(/var/www/html/callme-dz.io/storage/app/public/data/music/VikinG/VikinG)
exten => s,2,WaitExten(5)
exten => s,3,GoTo(s,1)

exten => 1,1,Goto(ligne_9,s,1)
exten => 2,1,Goto(ligne_9,s,1)

[goip]

;exten => 9001,1,set(DID=${EXTEN})
;exten => 9001,n,NoOp(${DID})
;exten => 9001,n,NoOp(${CALLERID(num)})`
;exten => 9001,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
;exten => 9001,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
;exten => 9001,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
;exten => 9001,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
;exten => 9001,n(vip),Set(QUEUE_PRIO=10)
;exten => 9001,n(vip)(device),Dial(${DEVICE},30)
;exten => 9001,n(vip)(device),Goto(ligne_in_1,s,1)
;exten => 9001,n(vip)Goto(ligne_in_1,s,1)
;exten => 9001,n,Hangup()`
;exten => 9001,n(simple),Set(QUEUE_PRIO=5)
;exten => 9001,n,Goto(ligne_in_1,s,1)
;exten => 9001,n,Hangup()
;exten => 9001,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
;exten => 9001,n(blacklist),Playback(vm-goodbye)
;exten => 9001,n,Hangup()

exten => 9001,1,set(DID=${EXTEN})
same => n,NoOp(${DID})
same => n,NoOp(${CALLERID(num)})
same => n,GotoIf($[${BLACKLIST()}=1]?blacklist)
same => n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
same => n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}}))
same => n(vip),Set(QUEUE_PRIO=10)
same => n(vip),Goto(ligne_in_1,s,1)
same => n,Hangup()
same => n(simple),Set(QUEUE_PRIO=5)
same => n(simple),Goto(ligne_in_1,s,1)
same => n,Hangup()
same => n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)})
same => n(blacklist),Playback(vm-goodbye)
same => n,Hangup()

exten => 9002,1,set(DID=${EXTEN})
same => n,NoOp(${DID})
same => n,NoOp(${CALLERID(num)})
same => n,GotoIf($[${BLACKLIST()}=1]?blacklist)
same => n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
same => n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}}))
same => n(vip),Set(QUEUE_PRIO=10)
same => n(vip),Goto(ligne_in_2,s,1)
same => n,Hangup()
same => n(simple),Set(QUEUE_PRIO=5)
same => n(simple),Goto(ligne_in_2,s,1)
same => n,Hangup()
same => n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)})
same => n(blacklist),Playback(vm-goodbye)
same => n,Hangup()

exten => 9003,1,set(DID=${EXTEN})
same => n,NoOp(${DID})
same => n,NoOp(${CALLERID(num)})
same => n,GotoIf($[${BLACKLIST()}=1]?blacklist)
same => n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
same => n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}}))
same => n(vip),Set(QUEUE_PRIO=10)
same => n(vip),Goto(ligne_in_8,s,1)
same => n,Hangup()
same => n(simple),Set(QUEUE_PRIO=5)
same => n(simple),Goto(ligne_in_8,s,1)
same => n,Hangup()
same => n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)})
same => n(blacklist),Playback(vm-goodbye)
same => n,Hangup()


exten => 9004,1,set(DID=${EXTEN})
same => n,NoOp(${DID})
same => n,NoOp(${CALLERID(num)})
same => n,GotoIf($[${BLACKLIST()}=1]?blacklist)
same => n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
same => n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}}))
same => n(vip),Set(QUEUE_PRIO=10)
same => n(vip),Goto(ligne_in_4,s,1)
same => n,Hangup()
same => n(simple),Set(QUEUE_PRIO=5)
same => n(simple),Goto(ligne_in_4,s,1)
same => n,Hangup()
same => n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)})
same => n(blacklist),Playback(vm-goodbye)
same => n,Hangup()


;[ligne_icosnet1]

;exten => _2139824XXXXX,1,set(DID=${EXTEN})
;same => n,NoOp(${DID})
same => n,NoOp(${CALLERID(num)})`
;same => n,GotoIf($[${BLACKLIST()}=1]?blacklist)
;same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
;same => n(device),ExecIf($[ “${CALLERID(num)}” = “"]?Set(CALLERID(name)="${DB(cidname/${CALLERID(num)}}")
;same => n(device),Set(CALLERID(name)=${DB(cidname/${CALLERID(num)}})
;same => n(device),Dial(${DEVICE},30)
;same => n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
;same => n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
;same => n(vip),Set(QUEUE_PRIO=10)
;same => n(vip)(device),Dial(${DEVICE},30)
;same => n(vip)(device),Goto(ligne_in_13,s,1)
;same => n(vip)Goto(ligne_in_13,s,1)
;same => n,Hangup()`
;same => n(simple),Set(QUEUE_PRIO=5)
;same => n,Goto(ligne_in_13,s,1)
;same => n,Hangup()
;same => n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
;same => n(blacklist),Playback(vm-goodbye)
;same => n,Hangup()



[Context_Lyes]
exten => s,1,Ringing()
exten => s,n,Hangup()


;==============================================================================================
;===================================== Control ================================================
;==============================================================================================



[ligne_in_1]

exten => s,1,Ringing
;exten => s,2,GoToIfTime(08:30-19:30|sun-thu|*|*?s,5)
exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,5)
;exten => s,2,GoToIfTime(*|sun-thu|*|*?s,3)
exten => s,3,Goto(Absence_Support,s,1)
exten => s,4,Hangup()
;exten => s,5,Playback(/var/www/html/callme-dz.io/storage/app/public/data/music/CALL/CALL)
exten => s,5,Goto(CRM-1,s,1)
exten => s,6,Hangup()


[ligne_in_2]
exten => s,1,Ringing
;exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,4)
exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,4)
exten => s,3,Goto(Absence_Support,s,1)
;exten => s,4,Playback(/var/www/html/callme-dz.io/storage/app/public/data/music/CALL/CALL)
exten => s,4,Goto(CRM-2,s,1)
exten => s,5,Hangup()


[ligne_in_3]
exten => s,1,Ringing
;exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,5)
exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,5)
exten => s,3,Goto(Absence_Support,s,1)
exten => s,4,Hangup()
exten => s,5,Goto(CRM-3,s,1)
exten => s,6,Hangup()

[ligne_in_4]
exten => s,1,Ringing
;exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,5)
;exten => s,2,GoToIfTime(08:30-15:30|sun-thu|*|*?s,5)
exten => s,2,GoToIfTime(*|*|*|*?s,5)
;exten => s,2,GoToIfTime(*|sun-thu|*|*?s,6)
exten => s,3,Goto(Absence_Support,s,1)
exten => s,4,Hangup()
;exten => s,5,Playback(/var/www/html/callme-dz.io/storage/app/public/data/music/CALL/CALL)
exten => s,5,Goto(SVI_Test_1,s,1)
exten => s,6,Hangup()

[ligne_in_5]
exten => s,1,Ringing
;exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,5)
exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,5)
;exten => s,2,GoToIfTime(*|sun-thu|*|*?s,3)
exten => s,3,Goto(Absence_Support,s,1)
exten => s,4,Hangup()
;exten => s,5,Playback(/var/www/html/callme-dz.io/storage/app/public/data/music/CALL/CALL)
exten => s,5,Goto(CRM-5,s,1)
exten => s,6,Hangup()


[ligne_in_6]
exten => s,1,Ringing
;exten => s,2,GoToIfTime(08:30-17:00|sun-thu|*|*?s,6)
exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,6)
;exten => s,2,GoToIfTime(*|sun-thu|*|*?s,3)
exten => s,3,Goto(Absence_Administration,s,1)
exten => s,4,Hangup()
exten => s,5,Playback(/var/www/html/callme-dz.io/storage/app/public/data/music/CALL/CALL)
exten => s,6,Goto(CRM-6,s,1)
exten => s,7,Hangup()

[ligne_in_7]
exten => s,1,Ringing
;exten => s,2,GoToIfTime(08:30-19:00|sun-thu|*|*?s,6)
exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,6)
;exten => s,2,GoToIfTime(*|sun-thu|*|*?s,3)
exten => s,3,Goto(vikings_absence,s,1)
exten => s,4,Hangup()
exten => s,5,Playback(/var/www/html/callme-dz.io/storage/app/public/data/music/CALL/CALL)
exten => s,6,Goto(CRM-7,s,1)
exten => s,7,Hangup()

[ligne_in_8]
exten => s,1,Ringing
;exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,6)
exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,6)
;exten => s,2,GoToIfTime(*|sun-thu|*|*?s,3)
exten => s,3,Goto(Absence_Administration,s,1)
exten => s,4,Hangup()
exten => s,5,Playback(/var/www/html/callme-dz.io/storage/app/public/data/music/CALL/CALL)
exten => s,6,Goto(CRM-8,s,1)
exten => s,7,Hangup()

[ligne_in_12]
exten => s,1,Ringing
;exten => s,2,GoToIfTime(08:30-19:00|sun-thu|*|*?s,6)
exten => s,2,GoToIfTime(08:30-16:30|sun-thu|*|*?s,6)
;exten => s,2,GoToIfTime(*|sun-thu|*|*?s,3)
exten => s,3,Goto(vikings_absence,s,1)
exten => s,4,Hangup()
exten => s,5,Playback(/var/www/html/callme-dz.io/storage/app/public/data/music/CALL/CALL)
exten => s,6,Goto(CRM-12,s,1)
exten => s,7,Hangup()



;==============================================================================================
;===================================== CRM ====================================================
;==============================================================================================

[CRM-1]

exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_1,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()


[CRM-2]

exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_2,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()


;;;;__________________________________________debut______ligne-RTC

[CRM-3]

exten => s,1,set(DID=${EXTEN})
same => n,NoOp(${DID})
same => n,NoOp(${CALLERID(num)})
same => n,GotoIf($[${BLACKLIST()}=1]?blacklist)
same => n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
same => n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}}))
same => n(vip),Set(QUEUE_PRIO=10)
same => n(vip),Goto(CRM-33,s,1)
same => n,Hangup()
same => n(simple),Set(QUEUE_PRIO=5)
same => n(simple),Goto(CRM-33,s,1)
same => n,Hangup()
same => n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)})
same => n(blacklist),Playback(vm-goodbye)
same => n,Hangup()

[CRM-33]

exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_3,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()


[CRM-4]

exten => s,1,set(DID=${EXTEN})
same => n,NoOp(${DID})
same => n,NoOp(${CALLERID(num)})
same => n,GotoIf($[${BLACKLIST()}=1]?blacklist)
same => n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
same => n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}}))
same => n(vip),Set(QUEUE_PRIO=10)
same => n(vip),Goto(CRM-44,s,1)
same => n,Hangup()
same => n(simple),Set(QUEUE_PRIO=5)
same => n(simple),Goto(CRM-44,s,1)
same => n,Hangup()
same => n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)})
same => n(blacklist),Playback(vm-goodbye)
same => n,Hangup()

[CRM-44]
exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_4,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()


;;;;_______________________________________fin________



[CRM-5]

exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_5,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()


;;;;_____________________________________debut_______ligne-RTC

[CRM-6]

exten => s,1,set(DID=${EXTEN})
same => n,NoOp(${DID})
same => n,NoOp(${CALLERID(num)})
same => n,GotoIf($[${BLACKLIST()}=1]?blacklist)
same => n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
same => n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}}))
same => n(vip),Set(QUEUE_PRIO=10)
same => n(vip),Goto(CRM-66,s,1)
same => n,Hangup()
same => n(simple),Set(QUEUE_PRIO=5)
same => n(simple),Goto(CRM-66,s,1)
same => n,Hangup()
same => n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)})
same => n(blacklist),Playback(vm-goodbye)
same => n,Hangup()

[CRM-66]

exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_6,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()

[CRM-7]

exten => s,1,set(DID=${EXTEN})
same => n,NoOp(${DID})
same => n,NoOp(${CALLERID(num)})
same => n,GotoIf($[${BLACKLIST()}=1]?blacklist)
same => n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
same => n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}}))
same => n(vip),Set(QUEUE_PRIO=10)
same => n(vip),Goto(CRM-77,s,1)
same => n,Hangup()
same => n(simple),Set(QUEUE_PRIO=5)
same => n(simple),Goto(CRM-77,s,1)
same => n,Hangup()
same => n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)})
same => n(blacklist),Playback(vm-goodbye)
same => n,Hangup()

[CRM-77]

exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_7,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()


;;;;____________________________________________fin_____

[CRM-8]

exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_8,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()

[CRM-12]

exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_12,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()
;--------------------------------------------------------------------------------------------
;--------------------------------------------------------------------------------------------
;--------------------------------------------------------------------------------------------

[CRM-13]

exten => s,1,Set(DID=${EXTEN})
   same => n,NoOp(${DID})
   same => n,NoOp(${CALLERID(num)})
   same => n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
   same => n,Set(CALLERID(name)=${DB(cidname/${CALLERID(num)})})
   same => n,GotoIf($["${DEVICE}" !=""]?device,1)
   same => n,Goto(ligne_13,s,1)

exten => device,1,Dial(${DEVICE},30)
same => n,Hangup()


;==============================================================================================
;===================================== context_Sortant  =======================================
;==============================================================================================

[trunk_AT_R]
include => CONTEXT_LOCAL
include => CONTEXT_SPY

exten => _0[2345679].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _0[2345679].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _0[2345679].,n,Set(CALLERID(num)=021990100)
exten => _0[2345679].,n,dial(SIP/trunk_AT/${EXTEN})
exten => _0[2345679].,n,Hangup




;[trunk_icosnet]
;switch => Realtime

;[trunk_icosnet]
;exten => _0[23456789].,1,Set(CALLERID(num)=213982420084)
;exten => _0[23456789].,n,dial(SIP/trunk_icosnet/${EXTEN})

[trunk_gsm2]

exten => _0[23456789].,1,Dial(SIP/trunk_gsm2/2${EXTEN})

[trunk_gsm2]

switch => Realtime

[trunk_gsm4]

exten => _0[23456789].,1,Dial(SIP/trunk_gsm4/4${EXTEN})

[trunk_gsm4]

switch => Realtime

;[TRUNK_ICOSNET_R]

;exten => _0[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID})
;exten => _0[23456789].,n,MixMonitor(${FILENAME}.wav,b)
;exten => _0[23456789].,n,Set(CALLERID(num)=213982401050)
;exten => _0[23456789].,n,dial(SIP/icosnet/${EXTEN})
;exten => _0[23456789].,n,Hangup

;[CONTEXT_HICHEM_1_R]

;exten => _0[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID})
;exten => _0[23456789].,n,MixMonitor(${FILENAME}.wav,b)
;exten => _0[23456789].,n,Set(CALLERID(num)=213982401050)
;exten => _0[23456789].,n,dial(SIP/icosnet/${EXTEN})
;exten => _0[23456789].,n,Hangup

;[TRUNK_ICOSNET]

;exten => _0[23456789].,1,Set(CALLERID(num)=213982401050)
;exten => _0[23456789].,n,dial(SIP/icosnet/${EXTEN})
;exten => _0[23456789].,n,Hangup

;===============================Support===============================

[CONTEXT_Support_R]

include => CONTEXT_LOCAL
include => CONTEXT_SPY

exten => _0[52348976].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _0[52348976].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _0[52348976].,n,Dial(SIP/trunk_gsm2/2${EXTEN})
exten => _0[52348976].,n,Dial(DAHDI/2/${EXTEN})
exten => _0[52348976].,n,Hangup()



;exten => _0[2348976].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;exten => _0[2348976].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;exten => _0[2348976].,n,Dial(DAHDI/2/${EXTEN})
;exten => _0[2348976].,n,Hangup()



exten => _10[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _10[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _10[23456789].,n,Dial(DAHDI/2/${EXTEN:1})


exten => _50[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _50[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _50[23456789].,n,Dial(SIP/trunk_gsm2/2${EXTEN:1})
exten => _50[23456789].,n,Hangup()

;_______________________________________________________

;exten => _+213[5].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;same => n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;same => n,Set(GROUP()=CONTEXT_Support_R)
;same => n,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
;same => n,Set(GROUP()=CONTEXT_Support_R)
;same => n,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
;same => n,GotoIf($["${DIALSTATUS}" = "BUSY"]?trunk_gsm3)
;same => n(trunk_gsm6),Dial(SIP/trunk_gsm1/1${EXTEN},,Tt,b(2000,4000,3000))

;exten => _0[5].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;same => n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;same => n,Set(GROUP()=CONTEXT_Support_R)
;same => n,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
;same => n,Set(GROUP()=CONTEXT_Support_R)
;same => n,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
;same => n,GotoIf($["${DIALSTATUS}" = "BUSY"]?trunk_gsm3)
;same => n(trunk_gsm6),Dial(SIP/trunk_gsm1/1${EXTEN},,Tt,b(2000,4000,3000))

;exten => _0[76].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;same => n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;same => n,Set(GROUP()=CONTEXT_Support_R)
;same => n,GotoIf($["${DIALSTATUS}" = "BUSY"]?gsm3)
;same => n,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
;same => n,Hangup()

;exten => _+[76].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;same => n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;same => n,Set(GROUP()=CONTEXT_Support_R)
;same => n,GotoIf($["${DIALSTATUS}" = "BUSY"]?gsm3)
;same => n,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
;same => n,Hangup()

;exten => _5+2130[5679].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;same => n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;same => n,Dial(SIP/trunk_gsm2/2${EXTEN:1})
;same => n,Hangup()

;exten => _33X.,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;exten => 33X.,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;same => n,Dial(SIP/trunk_gsm2/2${EXTEN:2})
;same => n,Hangup()
;_______________________________________________________


;exten => _10[2345679].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;exten => _10[2345679].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;;exten => _10[2345679].,n,Dial(DAHDI/G0/${EXTEN:1})
;exten => _10[2345679].,n,Dial(DAHDI/1/${EXTEN:1})
;exten => _10[2345679].,n,Dial(DAHDI/4/${EXTEN:1})
;exten => _10[2345679].,n,Dial(DAHDI/2/${EXTEN:1})
;exten => _10[2345679].,n,Hangup()

;exten => _0[9].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;exten => _0[9].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;exten => _0[9].,n,Set(CALLERID(num)=213982406406)
;exten => _0[9].,n,dial(SIP/trunk_icosnet2/${EXTEN})
;exten => _0[9].,n,Hangup

exten => 1,n,GotoIf($["${EXTEN}" = "#11"]?from-pstn,Production,1)
exten => 1,n,GotoIf($["${EXTEN}" = "#222"Goto(from-pstn,Support_Technique,1)]?)
exten => 1,n,GotoIf($["${EXTEN}" = "#333"Goto(from-pstn,Service_Vente,1)]?)



[CONTEXT_Support]
include => CONTEXT_LOCAL
include => CONTEXT_SPY


exten => _0[5].,1,Set(GROUP()=CONTEXT_Support_R)
exten => _0[5].,n,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
exten => _0[5].,n,GotoIf($["${DIALSTATUS}" = "BUSY"]?gsm3)
;exten => _0[5].,n,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
exten => _0[5].,n,Hangup()

exten => _0[76].,1,Set(GROUP()=CONTEXT_Support_R)
;exten => _0[76].,n,Dial(SIP/trunk_gsm1/1${EXTEN},,Tt,b(2000,4000,3000))
exten => _0[76].,n,GotoIf($["${DIALSTATUS}" = "BUSY"]?gsm3)
exten => _0[76].,n,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
exten => _0[76].,n,Hangup()

exten => _50[2345679].,1,MixMonitor(${FILENAME}.wav,b)
exten => _50[2345679].,n,Dial(SIP/trunk_gsm2/2${EXTEN:1})
exten => _50[2345679].,n,Hangup()

;exten => _70[2345679].,1,MixMonitor(${FILENAME}.wav,b)
;exten => _70[2345679].,n,Dial(SIP/trunk_gsm1/1${EXTEN:1})
;exten => _70[2345679].,n,Hangup()


exten => _10[2345679].,1,MixMonitor(${FILENAME}.wav,b)
;exten => _10[2345679].,n,Dial(DAHDI/G0/${EXTEN:1})
exten => _10[2345679].,n,Dial(DAHDI/1/${EXTEN:1})
exten => _10[2345679].,n,Dial(DAHDI/4/${EXTEN:1})
exten => _10[2345679].,n,Dial(DAHDI/2/${EXTEN:1})
exten => _10[2345679].,n,Hangup()

exten => _+XXX.,1,Dial(SIP/trunk_gsm2/2${EXTEN},,Tt,b(2000,4000,3000))
exten => _+XXX.,n,Hangup()



;===============================Support===============================

[CONTEXT_Commercial_R]
include => CONTEXT_LOCAL
include => CONTEXT_SPY


exten => _0[234].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _0[234].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _0[234].,n,Dial(DAHDI/3/${EXTEN})

exten => _0[57].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _0[57].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _0[57].,n,Dial(SIP/trunk_gsm3/3${EXTEN})


exten => _0[6].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _0[6].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _0[6].,n,Dial(SIP/trunk_gsm1/1${EXTEN})




exten => _10[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _10[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _10[23456789].,n,Dial(DAHDI/3/${EXTEN:1})

exten => _50[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _50[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _50[23456789].,n,Dial(SIP/trunk_gsm3/3${EXTEN:1})
exten => _50[23456789].,n,Hangup()

exten => _60[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _60[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _60[23456789].,n,Dial(SIP/trunk_gsm1/1${EXTEN:1})
exten => _60[23456789].,n,Hangup()

exten => 1,n,GotoIf($["${EXTEN}" = "#11"Goto(from-pstn,Production,1)]?)
exten => 1,n,GotoIf($["${EXTEN}" = "#22"Goto(from-pstn,Support_Technique,1)]?)
exten => 1,n,GotoIf($["${EXTEN}" = "#33"Goto(from-pstn,Service_Vente,1)]?)

[CONTEXT_Commercial]
include => CONTEXT_LOCAL
include => CONTEXT_SPY

exten => _0[23456789].,1,Dial(SIP/trunk_gsm4/4${EXTEN})
exten => _0[23456789].,n,Dial(DAHDI/3/${EXTEN})
exten => _0[23456789].,n,Hangup()

exten => _10[23456789].,1,Dial(DAHDI/3/${EXTEN:1})


[CONTEXT_0561752755_R]
include => CONTEXT_LOCAL
include => CONTEXT_SPY


exten => _0[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _0[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _0[23456789].,n,Dial(SIP/trunk_gsm3/3${EXTEN})
exten => _0[23456789].,n,Hangup()


[CONTEXT_0658814754_R]
include => CONTEXT_LOCAL
include => CONTEXT_SPY


exten => _0[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _0[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _0[23456789].,n,Dial(SIP/trunk_gsm1/1${EXTEN})
exten => _0[23456789].,n,Hangup()


[CONTEXT_023202102_R]
include => CONTEXT_LOCAL
include => CONTEXT_SPY


exten => _0[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _0[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _0[23456789].,n,Dial(DAHDI/3/${EXTEN})
exten => _0[23456789].,n,Hangup()





;===============================Administration===============================

[CONTEXT_Administration_R]
include => CONTEXT_LOCAL
include => CONTEXT_SPY

;exten => _0[5].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;exten => _0[5].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;exten => _0[5].,n,Dial(SIP/trunk_gsm3/3${EXTEN})
;exten => _0[5].,n,Hangup()

exten => _0[2346789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _0[2346789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _0[2346789].,n,Dial(DAHDI/1/${EXTEN})
exten => _0[2346789].,n,Hangup()



;exten => 1,n,GotoIf($["${EXTEN}" = "#11"Goto(from-pstn,Production,1)]?)
exten => 1,n,GotoIf($["${EXTEN}" = "#11"]?from-pstn,Production,1)
exten => 1,n,GotoIf($["${EXTEN}" = "#22"Goto(from-pstn,Support_Technique,1)]?)
exten => 1,n,GotoIf($["${EXTEN}" = "#33"Goto(from-pstn,Service_Vente,1)]?)

exten => _10[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => _10[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => _10[23456789].,n,Dial(DAHDI/1/${EXTEN:1})

;exten => _50[23456789].,1,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
;exten => _50[23456789].,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
;exten => _50[23456789].,n,Dial(SIP/trunk_gsm3/3${EXTEN:1})



[CONTEXT_Administration]
include => CONTEXT_LOCAL
include => CONTEXT_SPY

exten => _0[23456789].,1,Dial(SIP/trunk_gsm3/3${EXTEN})
exten => _0[23456789].,n,Hangup()




;==============================================================================================
;===================================== Routage ================================================
;==============================================================================================



;===========================================================================================
;=========================================================================================

[absence]

;exten => s,1,set(CDRS(userfield)=call absence ${CALLERID(num)})
;exten => s,2,noop(${DID})
;exten => s,3,Set(TIMEOUT(response)=2)
;;exten => s,2,BackGround(/var/www/html/compusave_101/storage/app/public/music/out_of_office_Sup/out_of_office_Sup)
;exten => s,4,BackGround(/var/www/html/compusave_101/storage/app/public/data/music/out_of_office_Sup/out_of_office_Sup)
;exten => s,5,WaitExten(5)
;exten => s,6,GoTo(s,4)

;;--------------Redirections
;exten => 1,1,set(CDRS(userfield)=call absence ${CALLERID(num)}
;exten => 1,n,Answer()
;exten => 1,n,Set(TIMEOUT(response)=10)
;exten => 1,n,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-inbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID})
;exten => 1,n,MixMonitor(${FILENAME}.wav,b)
;exten => 1,n,set(CDRS(userfield)=call transfer ${CALLERID(num)})
;exten => 1,n,dial(DAHDI/G0/0658814754,10)
;exten => 1,n,dial(DAHDI/G0/0561807622,30)



exten => s,1,set(CDRS(userfield)=call absence ${CALLERID(num)})
exten => s,n,noop(${DID})
exten => s,n,GotoIf($["${DID}" = "9001"]?Absence_GSM-Support-1)
exten => s,n,GotoIf($["${DID}" = "9002"]?Absence_GSM-Support-2)
exten => s,n,GotoIf($["${DID}" = "9003"]?Absence_GSM-Administration)
exten => s,n,GotoIf($["${DID}" = "9004"]?Absence_GSM-Commercial)
exten => s,n,GotoIf($["${DID}" = "9901"]?Absence_RTC-1)
exten => s,n,GotoIf($["${DID}" = "9902"]?Absence_RTC-2)
exten => s,n,GotoIf($["${DID}" = "9903"]?Absence_RTC-3)
exten => s,n,GotoIf($["${DID}" = "9904"]?Absence_RTC-4)

exten => s,n(Absence_RTC-1),Goto(Absence_SUP_Matinee,s,1)
exten => s,n(Absence_RTC-2),Goto(Absence_SUP_Matinee,s,1)
exten => s,n(Absence_RTC-3),Goto(Absence_SUP_Matinee,s,1)
exten => s,n(Absence_RTC-4),Goto(Absence_commercial_matinee,s,1)
exten => s,n(Absence_GSM-Support-1),Goto(Absence_SUP_Matinee,s,1)
exten => s,n(Absence_GSM-Support-2),Goto(Absence_SUP_Matinee,s,1)
exten => s,n(Absence_GSM-Administration),Goto(Absence_Administration_matinee,s,1)
exten => s,n(Absence_GSM-Commercial),Goto(Absence_commercial_matinee,s,1)


;----------------------Administration----------------------

[Absence_Administration_matinee]
exten => s,1,set(CDRS(userfield)=call_transfer_commercial${CALLERID(num)})
exten => s,2,noop(${DID})
exten => s,3,Set(TIMEOUT(response)=2)
exten => s,4,GoToIfTime(08:30-15:30|sun-thu|*|*?s,6)
exten => s,5,Goto(absence_Administration,s,1)
;forward to Yasmine
exten => s,6,Dial(SIP/trunk_gsm4/40561727996${EXTEN})
exten => s,7,Hangup()

[absence_Administration]

exten => s,1,set(CDRS(userfield)=call absence ${CALLERID(num)}
exten => s,2,Set(TIMEOUT(response)=5)
exten => s,3,Playback(/var/www/html/callme-dz.io/public/storage/data/music/administration_outofoffice/administration_outofoffice/)
exten => s,4,Hangup

;----------------------Commercial----------------------

[vikings_absence]
exten => s,1,set(CDRS(userfield)=call_transfer_commercial${CALLERID(num)})
exten => s,2,noop(${DID})
exten => s,3,Set(TIMEOUT(response)=2)
exten => s,4,Dial(SIP/trunk_gsm4/40561762707)
exten => s,5,Dial(DAHDI/3/0561762707)
exten => s,6,Hangup()


;----------------------Support----------------------

[Absence_SUP_Matinee]     

exten => s,1,GotoIf($["${DID}" = "9003"]?absence_Administration,s,1)
exten => s,2,set(CDRS(userfield)=call transfer matinee ${CALLERID(num)})
exten => s,3,noop(${DID})
exten => s,4,Set(TIMEOUT(response)=2)
exten => s,5,GoToIfTime(08:30-15:30|sun-thu|*|*?s,6)
exten => s,6,Goto(Absence_Support,s,1)
exten => s,7,dial(DAHDI/2/0659506216,10)
exten => s,8,Hangup()


[Absence_Support]

exten => s,1,set(CDRS(userfield)=call absence ${CALLERID(num)})
exten => s,2,noop(${DID})
exten => s,3,Set(TIMEOUT(response)=2)
exten => s,4,BackGround(/var/www/html/callme-dz.io/public/storage/data/music/support_outofoffice/support_outofoffice)
exten => s,5,WaitExten(5)
exten => s,6,GoTo(s,4)

;--------------Redirections
exten => 1,1,set(CDRS(userfield)=call absence ${CALLERID(num)}
exten => 1,n,Answer()
exten => 1,n,Set(TIMEOUT(response)=10)
exten => 1,n,Set(FILENAME=${STRFTIME(${EPOCH},,%Y%m%d-%H%M%S)}-outbound-${CALLERID(num)}-${EXTEN}-${UNIQUEID}.wav)
exten => 1,n,MixMonitor(${FILENAME},b,/home/support/bin/monitor_file.sh ${FILENAME})
exten => 1,n,set(CDRS(userfield)=call transfer ${CALLERID(num)})
exten => 1,n,dial(SIP/trunk_gsm2/20659506216)
exten => 1,n,dial(SIP/trunk_gsm2/20561807622)
exten => 1,n,Hangup

;---------------------------------------------------------------------------------------------------------------------
;---------------------------------------------------------------------------------------------------------------------
; Nabila     : 0561807622
; Rachid     : 0561762715
; Rabeh      : 0540500745
; Rabeh      : 0540600847
; Hichem     : 0551727065
; Hichem 2   : 0540502282
; Rachid     ; 0550418509
;---------------------------------------------------------------------------------------------------------------------
;---------------------------------------------------------------------------------------------------------------------





exten => 213982306406,1,set(DID=${EXTEN})
exten => 213982306406,n,NoOp(${DID})
exten => 213982306406,n,NoOp(${CALLERID(num)})
exten => 213982306406,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => 213982306406,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
exten => 213982306406,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => 213982306406,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
exten => 213982306406,n(vip),Set(QUEUE_PRIO=10)
exten => 213982306406,n(vip)(device),Dial(${DEVICE},30)
exten => 213982306406,n(vip)(device),Goto(ligne_in_10,s,1)
exten => 213982306406,n(vip)Goto(ligne_in_10,s,1)
exten => 213982306406,n,Hangup()
exten => 213982306406,n(simple),Set(QUEUE_PRIO=5)
exten => 213982306406,n,Goto(ligne_in_10,s,1)
exten => 213982306406,n,Hangup()
exten => 213982306406,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
exten => 213982306406,n(blacklist),Playback(vm-goodbye)
exten => 213982306406,n,Hangup()

exten => 213982320084,1,set(DID=${EXTEN})
exten => 213982320084,n,NoOp(${DID})
exten => 213982320084,n,NoOp(${CALLERID(num)})
exten => 213982320084,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => 213982320084,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
exten => 213982320084,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => 213982320084,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
exten => 213982320084,n(vip),Set(QUEUE_PRIO=10)
exten => 213982320084,n(vip)(device),Dial(${DEVICE},30)
exten => 213982320084,n(vip)(device),Goto(ligne_in_11,s,1)
exten => 213982320084,n(vip)Goto(ligne_in_11,s,1)
exten => 213982320084,n,Hangup()
exten => 213982320084,n(simple),Set(QUEUE_PRIO=5)
exten => 213982320084,n,Goto(ligne_in_11,s,1)
exten => 213982320084,n,Hangup()
exten => 213982320084,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
exten => 213982320084,n(blacklist),Playback(vm-goodbye)
exten => 213982320084,n,Hangup()

exten => 213982320452,1,set(DID=${EXTEN})
exten => 213982320452,n,NoOp(${DID})
exten => 213982320452,n,NoOp(${CALLERID(num)})
exten => 213982320452,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => 213982320452,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
exten => 213982320452,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => 213982320452,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
exten => 213982320452,n(vip),Set(QUEUE_PRIO=10)
exten => 213982320452,n(vip)(device),Dial(${DEVICE},30)
exten => 213982320452,n(vip)(device),Goto(ligne_in_10,s,1)
exten => 213982320452,n(vip)Goto(ligne_in_10,s,1)
exten => 213982320452,n,Hangup()
exten => 213982320452,n(simple),Set(QUEUE_PRIO=5)
exten => 213982320452,n,Goto(ligne_in_10,s,1)
exten => 213982320452,n,Hangup()
exten => 213982320452,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
exten => 213982320452,n(blacklist),Playback(vm-goodbye)
exten => 213982320452,n,Hangup()

exten => 213982320455,1,set(DID=${EXTEN})
exten => 213982320455,n,NoOp(${DID})
exten => 213982320455,n,NoOp(${CALLERID(num)})
exten => 213982320455,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => 213982320455,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
exten => 213982320455,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => 213982320455,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
exten => 213982320455,n(vip),Set(QUEUE_PRIO=10)
exten => 213982320455,n(vip)(device),Dial(${DEVICE},30)
exten => 213982320455,n(vip)(device),Goto(ligne_in_11,s,1)
exten => 213982320455,n(vip)Goto(ligne_in_11,s,1)
exten => 213982320455,n,Hangup()
exten => 213982320455,n(simple),Set(QUEUE_PRIO=5)
exten => 213982320455,n,Goto(ligne_in_11,s,1)
exten => 213982320455,n,Hangup()
exten => 213982320455,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
exten => 213982320455,n(blacklist),Playback(vm-goodbye)
exten => 213982320455,n,Hangup()

exten => 213982320506,1,set(DID=${EXTEN})
exten => 213982320506,n,NoOp(${DID})
exten => 213982320506,n,NoOp(${CALLERID(num)})
exten => 213982320506,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => 213982320506,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
exten => 213982320506,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => 213982320506,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
exten => 213982320506,n(vip),Set(QUEUE_PRIO=10)
exten => 213982320506,n(vip)(device),Dial(${DEVICE},30)
exten => 213982320506,n(vip)(device),Goto(ligne_in_10,s,1)
exten => 213982320506,n(vip)Goto(ligne_in_10,s,1)
exten => 213982320506,n,Hangup()
exten => 213982320506,n(simple),Set(QUEUE_PRIO=5)
exten => 213982320506,n,Goto(ligne_in_10,s,1)
exten => 213982320506,n,Hangup()
exten => 213982320506,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
exten => 213982320506,n(blacklist),Playback(vm-goodbye)
exten => 213982320506,n,Hangup()

exten => 213982320508,1,set(DID=${EXTEN})
exten => 213982320508,n,NoOp(${DID})
exten => 213982320508,n,NoOp(${CALLERID(num)})
exten => 213982320508,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => 213982320508,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
exten => 213982320508,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => 213982320508,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
exten => 213982320508,n(vip),Set(QUEUE_PRIO=10)
exten => 213982320508,n(vip)(device),Dial(${DEVICE},30)
exten => 213982320508,n(vip)(device),Goto(ligne_in_11,s,1)
exten => 213982320508,n(vip)Goto(ligne_in_11,s,1)
exten => 213982320508,n,Hangup()
exten => 213982320508,n(simple),Set(QUEUE_PRIO=5)
exten => 213982320508,n,Goto(ligne_in_11,s,1)
exten => 213982320508,n,Hangup()
exten => 213982320508,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
exten => 213982320508,n(blacklist),Playback(vm-goodbye)
exten => 213982320508,n,Hangup()

exten => 213982362562,1,set(DID=${EXTEN})
exten => 213982362562,n,NoOp(${DID})
exten => 213982362562,n,NoOp(${CALLERID(num)})
exten => 213982362562,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => 213982362562,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
exten => 213982362562,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => 213982362562,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
exten => 213982362562,n(vip),Set(QUEUE_PRIO=10)
exten => 213982362562,n(vip)(device),Dial(${DEVICE},30)
exten => 213982362562,n(vip)(device),Goto(ligne_in_10,s,1)
exten => 213982362562,n(vip)Goto(ligne_in_10,s,1)
exten => 213982362562,n,Hangup()
exten => 213982362562,n(simple),Set(QUEUE_PRIO=5)
exten => 213982362562,n,Goto(ligne_in_11,s,1)
exten => 213982362562,n,Hangup()
exten => 213982362562,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
exten => 213982362562,n(blacklist),Playback(vm-goodbye)
exten => 213982362562,n,Hangup()

exten => 213982366566,1,set(DID=${EXTEN})
exten => 213982366566,n,NoOp(${DID})
exten => 213982366566,n,NoOp(${CALLERID(num)})
exten => 213982366566,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => 213982366566,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
exten => 213982366566,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => 213982366566,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
exten => 213982366566,n(vip),Set(QUEUE_PRIO=10)
exten => 213982366566,n(vip)(device),Dial(${DEVICE},30)
exten => 213982366566,n(vip)(device),Goto(ligne_in_11,s,1)
exten => 213982366566,n(vip)Goto(ligne_in_11,s,1)
exten => 213982366566,n,Hangup()
exten => 213982366566,n(simple),Set(QUEUE_PRIO=5)
exten => 213982366566,n,Goto(ligne_in_11,s,1)
exten => 213982366566,n,Hangup()
exten => 213982366566,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
exten => 213982366566,n(blacklist),Playback(vm-goodbye)
exten => 213982366566,n,Hangup()

exten => 213982320509,1,set(DID=${EXTEN})
exten => 213982320509,n,NoOp(${DID})
exten => 213982320509,n,NoOp(${CALLERID(num)})
exten => 213982320509,n,GotoIf($[${BLACKLIST()}=1]?blacklist)
exten => 213982320509,n,Set(DEVICE=${DB(phones/${CALLERID(num)}/device)})
exten => 213982320509,n,GotoIf(${DB_EXISTS(vi-cidname/${CALLERID(num)})}?vip:simple)
exten => 213982320509,n(vip),Set(CALLERID(name)=${DB(vi-cidname/${CALLERID(num)}})
exten => 213982320509,n(vip),Set(QUEUE_PRIO=10)
exten => 213982320509,n(vip)(device),Dial(${DEVICE},30)
exten => 213982320509,n(vip)(device),Goto(ligne_in_11,s,1)
exten => 213982320509,n(vip)Goto(ligne_in_11,s,1)
exten => 213982320509,n,Hangup()
exten => 213982320509,n(simple),Set(QUEUE_PRIO=5)
exten => 213982320509,n,Goto(CRM-11,s,1)
exten => 213982320509,n,Hangup()
exten => 213982320509,n(blacklist),set(CDR(userfield)=liste noire ${CALLERID(num)}
exten => 213982320509,n(blacklist),Playback(vm-goodbye)
exten => 213982320509,n,Hangup()


[ligne_icosnet1]
exten => 213982401050,1,set(DID=${EXTEN})
same => n,Goto(ligne_14,s,1)
same => n,Hangup()


[SVI_Test_1]
exten => s,1,Answer
exten => s,2,Set(TIMEOUT(response)=2)
exten => s,3,BackGround(/var/www/html/callme-dz.io/storage/app/public/data/music/BienvenuICT/BienvenuICT)
exten => s,4,WaitExten(5)
exten => s,5,GoTo(s,3)

;Bienvenue
exten => 1,1,Goto(Exposant,s,1)
exten => 2,1,Goto(Visiteur,s,1)
exten => 3,1,Goto(Information,s,1)

[Exposant]

exten => s,1,Goto(ligne_14,s,1)

[Visiteur]
exten => s,1,Goto(ligne_14,s,1)

[Information]
exten => s,1,Playback(/var/www/html/callme-dz.io/storage/app/public/data/music/InformationICT/InformationICT)
exten => s,2,GoTo(SVI_Test_1,s,1)







[bulkcall]
exten => start,1,Answer()
; Mettez le path de votre fichier Son
same => n,Playback(/home/support/PUSH/attente_Gros_1)
